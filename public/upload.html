<!DOCTYPE html>
<html>
<head>
<title>Upload M√©morial</title>
<style>body{font-family:Arial;padding:50px;text-align:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;}
.container{max-width:600px;margin:auto;background:rgba(255,255,255,0.1);padding:40px;border-radius:20px;}
input,button{font-size:18px;padding:15px;margin:10px;border:none;border-radius:10px;}
input[type="file"]{width:100%;background:rgba(255,255,255,0.2);color:white;}
button{background:#ff6b6b;color:white;cursor:pointer;width:100%;font-weight:bold;}
#status{font-size:20px;margin:20px;}</style>
</head>
<body>
<div class="container">
  <h1>üì∏ Cr√©er M√©morial</h1>
  <input type="text" id="name" placeholder="Nom du d√©funt" value="John Doe">
  <input type="file" id="files" multiple accept="image/*">
  <button onclick="createMemorial()">üöÄ Cr√©er & Lancer Slideshow</button>
  <div id="status"></div>
</div>

<script>
async function createMemorial() {
  const name = document.getElementById('name').value;
  const files = document.getElementById('files').files;
  const status = document.getElementById('status');
  
  if(!files.length) return status.textContent = '‚ùå Photos requises';
  
  status.textContent = '‚è≥ Upload...';
  
  try {
    const formData = new FormData();
    Array.from(files).forEach(file => formData.append('files[]', file));
    formData.append('name', name);
    
    const res = await fetch('/api/upload', {method: 'POST', body: formData});
    const data = await res.json();
    
    if(data.success) {
      // Auto fullscreen slideshow
      localStorage.setItem('currentMemorial', JSON.stringify({
        name: name,
        images: data.urls
      }));
      window.location.href = '/slideshow.html';
    }
  } catch(e) {
    status.textContent = '‚ùå ' + e;
  }
}
</script>
</body>
</html>
