<!DOCTYPE html>
<html>
<head><title>Upload MÃ©morial</title>
<style>body{font-family:Arial;padding:40px;text-align:center;background:#f5f5f5;}
button{padding:15px 30px;background:#0070f3;color:white;border:none;border-radius:8px;font-size:18px;cursor:pointer;}
input[type="file"],input[type="text"]{margin:10px;padding:10px;font-size:16px;}</style>
</head>
<body>
<h1>ðŸ“¸ Upload Photos MÃ©morial</h1>
<input type="text" id="memorialName" placeholder="Nom dÃ©funt" value="John Doe">
<input type="file" id="files" multiple accept="image/*">
<button onclick="uploadAndRedirect()">ðŸš€ Upload & Voir MÃ©morial</button>
<div id="status"></div>

<script>
async function uploadAndRedirect() {
  const files = document.getElementById('files').files;
  const name = document.getElementById('memorialName').value;
  const status = document.getElementById('status');
  
  if(!files.length) return status.textContent = 'Choisis photos';
  
  status.textContent = 'Upload...';
  
  try {
    const formData = new FormData();
    Array.from(files).forEach(f => formData.append('files[]', f));
    formData.append('name', name);
    
    const res = await fetch('/api/upload', {method: 'POST', body: formData});
    const data = await res.json();
    
    if(data.success) {
      localStorage.setItem('memorial_' + name, JSON.stringify(data.urls));
      status.innerHTML = `âœ… Upload OK ! <a href="/slideshow.html?name=${name}">Voir MÃ©morial</a>`;
    }
  } catch(e) {
    status.textContent = 'Erreur: ' + e;
  }
}
</script>
</body>
</html>
